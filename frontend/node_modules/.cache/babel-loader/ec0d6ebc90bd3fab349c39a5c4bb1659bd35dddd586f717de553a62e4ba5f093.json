{"ast":null,"code":"import React,{useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DonorForm=_ref=>{let{onDonorAdded}=_ref;const[formData,setFormData]=useState({name:\"\",bloodType:\"O+\",plasmaDonor:false,// ✅ New Field for Plasma Donation\ncity:\"\",contact:\"\"});const[errorMessage,setErrorMessage]=useState(\"\");// Error Display\nconst handleChange=e=>{const{name,value,type,checked}=e.target;setFormData({...formData,[name]:type===\"checkbox\"?checked:value// ✅ Handle checkbox state\n});setErrorMessage(\"\");// Clear error on change\n};const handleSubmit=async e=>{e.preventDefault();console.log(\"Form Data Before Sending:\",formData);// Debugging\nif(!formData.name||!formData.bloodType||!formData.city||!formData.contact){setErrorMessage(\"❌ All fields are required.\");return;}if(!/^\\d{10,}$/.test(formData.contact)){setErrorMessage(\"❌ Contact number must be at least 10 digits.\");return;}try{const response=await fetch(\"http://localhost:5000/api/donors\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(formData)});console.log(\"Response Status:\",response.status);// Debugging\nconst data=await response.json();console.log(\"Response Data:\",data);// Debugging\nif(response.ok){alert(\"✅ Donor added successfully!\");setFormData({name:\"\",bloodType:\"O+\",isPlasmaDonor:false,city:\"\",contact:\"\"});// ✅ Reset Form\nsetErrorMessage(\"\");if(onDonorAdded){onDonorAdded();// ✅ Refresh Donor List\n}}else{setErrorMessage(`❌ Failed to add donor: ${data.message||\"Unknown error\"}`);}}catch(error){console.error(\"❌ Error submitting form:\",error);setErrorMessage(\"❌ Error adding donor. Ensure the backend is running and CORS is enabled.\");}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Become a Blood Donor\"}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:errorMessage}),\" \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"Full Name\",value:formData.name,onChange:handleChange,required:true}),/*#__PURE__*/_jsxs(\"select\",{name:\"bloodType\",value:formData.bloodType,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"O+\",children:\"O+\"}),/*#__PURE__*/_jsx(\"option\",{value:\"A+\",children:\"A+\"}),/*#__PURE__*/_jsx(\"option\",{value:\"B+\",children:\"B+\"}),/*#__PURE__*/_jsx(\"option\",{value:\"AB+\",children:\"AB+\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"city\",placeholder:\"City\",value:formData.city,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"contact\",placeholder:\"Contact Number\",value:formData.contact,onChange:handleChange,required:true}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"plasmaDonor\",checked:formData.plasmaDonor,onChange:handleChange}),\"Register as Plasma Donor\"]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]});};export default DonorForm;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","DonorForm","_ref","onDonorAdded","formData","setFormData","name","bloodType","plasmaDonor","city","contact","errorMessage","setErrorMessage","handleChange","e","value","type","checked","target","handleSubmit","preventDefault","console","log","test","response","fetch","method","headers","body","JSON","stringify","status","data","json","ok","alert","isPlasmaDonor","message","error","onSubmit","children","style","color","placeholder","onChange","required"],"sources":["C:/Users/navad/blood-donor-backend/frontend/src/pages/DonorForm.js"],"sourcesContent":["import React, { useState } from \"react\";\r\n\r\nconst DonorForm = ({ onDonorAdded }) => {\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    bloodType: \"O+\",\r\n    plasmaDonor: false, // ✅ New Field for Plasma Donation\r\n    city: \"\",\r\n    contact: \"\",\r\n  });\r\n\r\n  const [errorMessage, setErrorMessage] = useState(\"\"); // Error Display\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setFormData({\r\n      ...formData,\r\n      [name]: type === \"checkbox\" ? checked : value, // ✅ Handle checkbox state\r\n    });\r\n    setErrorMessage(\"\"); // Clear error on change\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    console.log(\"Form Data Before Sending:\", formData); // Debugging\r\n\r\n    if (!formData.name || !formData.bloodType || !formData.city || !formData.contact) {\r\n      setErrorMessage(\"❌ All fields are required.\");\r\n      return;\r\n    }\r\n\r\n    if (!/^\\d{10,}$/.test(formData.contact)) {\r\n      setErrorMessage(\"❌ Contact number must be at least 10 digits.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(\"http://localhost:5000/api/donors\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      console.log(\"Response Status:\", response.status); // Debugging\r\n      const data = await response.json();\r\n      console.log(\"Response Data:\", data); // Debugging\r\n\r\n      if (response.ok) {\r\n        alert(\"✅ Donor added successfully!\");\r\n        setFormData({ name: \"\", bloodType: \"O+\", isPlasmaDonor: false, city: \"\", contact: \"\" }); // ✅ Reset Form\r\n        setErrorMessage(\"\");\r\n\r\n        if (onDonorAdded) {\r\n          onDonorAdded(); // ✅ Refresh Donor List\r\n        }\r\n      } else {\r\n        setErrorMessage(`❌ Failed to add donor: ${data.message || \"Unknown error\"}`);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"❌ Error submitting form:\", error);\r\n      setErrorMessage(\"❌ Error adding donor. Ensure the backend is running and CORS is enabled.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <h3>Become a Blood Donor</h3>\r\n\r\n      {errorMessage && <p style={{ color: \"red\" }}>{errorMessage}</p>} {/* ✅ Show error message */}\r\n\r\n      <input\r\n        type=\"text\"\r\n        name=\"name\"\r\n        placeholder=\"Full Name\"\r\n        value={formData.name}\r\n        onChange={handleChange}\r\n        required\r\n      />\r\n\r\n      <select name=\"bloodType\" value={formData.bloodType} onChange={handleChange}>\r\n        <option value=\"O+\">O+</option>\r\n        <option value=\"A+\">A+</option>\r\n        <option value=\"B+\">B+</option>\r\n        <option value=\"AB+\">AB+</option>\r\n      </select>\r\n\r\n      <input\r\n        type=\"text\"\r\n        name=\"city\"\r\n        placeholder=\"City\"\r\n        value={formData.city}\r\n        onChange={handleChange}\r\n        required\r\n      />\r\n\r\n      <input\r\n        type=\"text\"\r\n        name=\"contact\"\r\n        placeholder=\"Contact Number\"\r\n        value={formData.contact}\r\n        onChange={handleChange}\r\n        required\r\n      />\r\n\r\n      {/* ✅ Plasma Donor Checkbox */}\r\n      <label>\r\n        <input type=\"checkbox\" name=\"plasmaDonor\" checked={formData.plasmaDonor} onChange={handleChange} />\r\n        Register as Plasma Donor\r\n      </label>\r\n\r\n      <button type=\"submit\">Submit</button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default DonorForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}